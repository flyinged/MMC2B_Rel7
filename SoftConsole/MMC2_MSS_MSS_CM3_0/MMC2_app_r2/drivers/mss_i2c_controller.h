/*
 * mss_i2c_controller.h
 *
 *  Created on: 01.12.2015
 *      Author: malatesta_a
 */

#ifndef MSS_I2C_CONTROLLER_H_
#define MSS_I2C_CONTROLLER_H_

/* OFFSETS from BASE */
#define MSS_I2C_DBG_REG 0
#define     MSS_I2C_MAIN_FSM 0x000000FF
#define     MSS_I2C_I2C_FSM  0x0000FF00
#define     MSS_I2C_APP_FSM  0x00FF0000
#define     MSS_I2C_I2C_TS   0x03000000
#define     MSS_I2C_VER      0xF0000000

#define MSS_I2C_SET_RPM_FU_REG 0x4
#define MSS_I2C_SET_RPM_FB_REG 0x8
#define MSS_I2C_SET_RPM_B_REG  0xC

#define MSS_I2C_CTRL_N0   4 //inital offset (utility registers)
#define MSS_I2C_CTRL_NCOM 3 //number of common registers per fan controller
#define MSS_I2C_CTRL_NFAN 10 //number of specific registers per fan
#define MSS_I2C_CTRL_NFC  (NCOM+(4*NFAN)) //number of registers per fan controller

#define MSS_I2C_CTRL_STATUS(FC) 4*(N0+(FC*NFC)+0)
#define MSS_I2C_CTRL_MODE(FC)   4*(N0+(FC*NFC)+1)
#define MSS_I2C_CTRL_TIME(FC)   4*(N0+(FC*NFC)+2)

#define MSS_I2C_CTRL_CFG12(FC,FAN)  4*((MSS_I2C_CTRL_N0+MSS_I2C_CTRL_NCOM+(FC*MSS_I2C_CTRL_NFC)+(FAN*MSS_I2C_CTRL_NFAN)+1)
#define MSS_I2C_CTRL_CFGMFR(FC,FAN) 4*((MSS_I2C_CTRL_N0+MSS_I2C_CTRL_NCOM+(FC*MSS_I2C_CTRL_NFC)+(FAN*MSS_I2C_CTRL_NFAN)+2)
#define MSS_I2C_CTRL_FRESP(FC,FAN)  4*((MSS_I2C_CTRL_N0+MSS_I2C_CTRL_NCOM+(FC*MSS_I2C_CTRL_NFC)+(FAN*MSS_I2C_CTRL_NFAN)+3)
#define MSS_I2C_CTRL_FST(FC,FAN)    4*((MSS_I2C_CTRL_N0+MSS_I2C_CTRL_NCOM+(FC*MSS_I2C_CTRL_NFC)+(FAN*MSS_I2C_CTRL_NFAN)+4)
#define MSS_I2C_CTRL_FCMD(FC,FAN)   4*((MSS_I2C_CTRL_N0+MSS_I2C_CTRL_NCOM+(FC*MSS_I2C_CTRL_NFC)+(FAN*MSS_I2C_CTRL_NFAN)+5)
#define MSS_I2C_CTRL_FSPD(FC,FAN)   4*((MSS_I2C_CTRL_N0+MSS_I2C_CTRL_NCOM+(FC*MSS_I2C_CTRL_NFC)+(FAN*MSS_I2C_CTRL_NFAN)+6)
#define MSS_I2C_CTRL_FTIME(FC,FAN)  4*((MSS_I2C_CTRL_N0+MSS_I2C_CTRL_NCOM+(FC*MSS_I2C_CTRL_NFC)+(FAN*MSS_I2C_CTRL_NFAN)+7)
#define MSS_I2C_CTRL_FPWM(FC,FAN)   4*((MSS_I2C_CTRL_N0+MSS_I2C_CTRL_NCOM+(FC*MSS_I2C_CTRL_NFC)+(FAN*MSS_I2C_CTRL_NFAN)+8)
#define MSS_I2C_CTRL_FAPWM(FC,FAN)  4*((MSS_I2C_CTRL_N0+MSS_I2C_CTRL_NCOM+(FC*MSS_I2C_CTRL_NFC)+(FAN*MSS_I2C_CTRL_NFAN)+9)

#define MSS_I2C_CTRL_DAT  0x000001F8U
#define MSS_I2C_CTRL_DAT2 0x000001F4U
#define MSS_I2C_CTRL_CMD  0x000001FCU
//compose control opcode with I2C address, number of bytes, register address and type of access (R|W)
#define MSS_I2C_CTRL_OP(ADDR,N,REG,RNW) (0x43000000U | ((ADDR&0x0000007F)<<12) | ((RNW&0x00000001)<<11) | ((N&0x00000007)<<8) | (REG&0x000000FF))
#define MSS_I2C_CTRL_RST 0xFF000000U

/* Fan Controller 1 */
#define FC1_ST       0x00000010U //N0+0=4
#define FC1_MODE     0x00000014U //N0+1=5
#define FC1_TIME     0x00000018U //N0+2=6

//#define FC1_1_PAGE   0x01C     //N0+NCOM+0=7
#define FC1_1_CFG12  0x00000020U //N0+NCOM+1=8
#define FC1_1_CFGMFR 0x00000024U //N0+NCOM+2=9
#define FC1_1_FRESP  0x00000028U //N0+NCOM+3=10
#define FC1_1_FST    0x0000002CU //N0+NCOM+4=11
#define FC1_1_FCMD   0x00000030U //N0+NCOM+5=12
#define FC1_1_FSPD   0x00000034U //N0+NCOM+6=13
#define FC1_1_FTIME  0x00000038U //N0+NCOM+7=14
#define FC1_1_FPWM   0x0000003CU //N0+NCOM+8=15
#define FC1_1_FAPWM  0x00000040U //N0+NCOM+9=16

//#define FC1_2_PAGE   0x044     //N0+NCOM+(1*NFAN)+0 = 17
#define FC1_2_CFG12  0x00000048U //N0+NCOM+(1*NFAN)+1 = 18
#define FC1_2_CFGMFR 0x0000004CU //N0+NCOM+(1*NFAN)+2 = 19
#define FC1_2_FRESP  0x00000050U //N0+NCOM+(1*NFAN)+3 = 20
#define FC1_2_FST    0x00000054U //N0+NCOM+(1*NFAN)+4 = 21
#define FC1_2_FCMD   0x00000058U //N0+NCOM+(1*NFAN)+5 = 22
#define FC1_2_FSPD   0x0000005CU //N0+NCOM+(1*NFAN)+6 = 23
#define FC1_2_FTIME  0x00000060U //N0+NCOM+(1*NFAN)+7 = 24
#define FC1_2_FPWM   0x00000064U //N0+NCOM+(1*NFAN)+8 = 25
#define FC1_2_FAPWM  0x00000068U //N0+NCOM+(1*NFAN)+9 = 26

//#define FC1_3_PAGE   0x06C //27
#define FC1_3_CFG12  0x00000070U //N0+NCOM+(2*NFAN)+1 = 28
#define FC1_3_CFGMFR 0x00000074U //N0+NCOM+(2*NFAN)+2 = 29
#define FC1_3_FRESP  0x00000078U //N0+NCOM+(2*NFAN)+3 = 30
#define FC1_3_FST    0x0000007CU //N0+NCOM+(2*NFAN)+4 = 31
#define FC1_3_FCMD   0x00000080U //N0+NCOM+(2*NFAN)+5 = 32
#define FC1_3_FSPD   0x00000084U //N0+NCOM+(2*NFAN)+6 = 33
#define FC1_3_FTIME  0x00000088U //N0+NCOM+(2*NFAN)+7 = 34
#define FC1_3_FPWM   0x0000008CU //N0+NCOM+(2*NFAN)+8 = 35
#define FC1_3_FAPWM  0x00000090U //N0+NCOM+(2*NFAN)+9 = 36

//#define FC1_4_PAGE   0x094 //37
#define FC1_4_CFG12  0x00000098U //N0+NCOM+(3*NFAN)+1 = 38
#define FC1_4_CFGMFR 0x0000009CU //N0+NCOM+(3*NFAN)+2 = 39
#define FC1_4_FRESP  0x000000A0U //N0+NCOM+(3*NFAN)+3 = 40
#define FC1_4_FST    0x000000A4U //N0+NCOM+(3*NFAN)+4 = 41
#define FC1_4_FCMD   0x000000A8U //N0+NCOM+(3*NFAN)+5 = 42
#define FC1_4_FSPD   0x000000ACU //N0+NCOM+(3*NFAN)+6 = 43
#define FC1_4_FTIME  0x000000B0U //N0+NCOM+(3*NFAN)+7 = 44
#define FC1_4_FPWM   0x000000B4U //N0+NCOM+(3*NFAN)+8 = 45
#define FC1_4_FAPWM  0x000000B8U //N0+NCOM+(3*NFAN)+9 = 46

/* Fan Controller 2 */
#define FC2_ST       0x000000BCU //N0+(1*NFC)+0 = 47
#define FC2_MODE     0x000000C0U //N0+(1*NFC)+1 = 48
#define FC2_TIME     0x000000C4U //N0+(1*NFC)+2 = 49

//#define FC2_1_PAGE   0x0C8     //N0+NFC+NCOM+0 = 50
#define FC2_1_CFG12  0x000000CCU //N0+NFC+NCOM+1 = 51
#define FC2_1_CFGMFR 0x000000D0U //N0+NFC+NCOM+2 = 52
#define FC2_1_FRESP  0x000000D4U //N0+NFC+NCOM+3 = 53
#define FC2_1_FST    0x000000D8U //N0+NFC+NCOM+4 = 54
#define FC2_1_FCMD   0x000000DCU //N0+NFC+NCOM+5 = 55
#define FC2_1_FSPD   0x000000E0U //N0+NFC+NCOM+6 = 56
#define FC2_1_FTIME  0x000000E4U //N0+NFC+NCOM+7 = 57
#define FC2_1_FPWM   0x000000E8U //N0+NFC+NCOM+8 = 58
#define FC2_1_FAPWM  0x000000ECU //N0+NFC+NCOM+9 = 59

//#define FC2_2_PAGE   0x0F0     //N0+NFC+NCOM+(1*NFAN)+0 = 60
#define FC2_2_CFG12  0x000000F4U //N0+NFC+NCOM+(1*NFAN)+1 = 61
#define FC2_2_CFGMFR 0x000000F8U //N0+NFC+NCOM+(1*NFAN)+2 = 62
#define FC2_2_FRESP  0x000000FCU //N0+NFC+NCOM+(1*NFAN)+3 = 63
#define FC2_2_FST    0x00000100U //N0+NFC+NCOM+(1*NFAN)+4 = 64
#define FC2_2_FCMD   0x00000104U //N0+NFC+NCOM+(1*NFAN)+5 = 65
#define FC2_2_FSPD   0x00000108U //N0+NFC+NCOM+(1*NFAN)+6 = 66
#define FC2_2_FTIME  0x0000010CU //N0+NFC+NCOM+(1*NFAN)+7 = 67
#define FC2_2_FPWM   0x00000110U //N0+NFC+NCOM+(1*NFAN)+8 = 68
#define FC2_2_FAPWM  0x00000114U //N0+NFC+NCOM+(1*NFAN)+9 = 69

//#define FC2_3_PAGE   0x118     //N0+NFC+NCOM+(2*NFAN)+0 = 70
#define FC2_3_CFG12  0x0000011CU //N0+NFC+NCOM+(2*NFAN)+1 = 71
#define FC2_3_CFGMFR 0x00000120U //N0+NFC+NCOM+(2*NFAN)+2 = 72
#define FC2_3_FRESP  0x00000124U //N0+NFC+NCOM+(2*NFAN)+3 = 73
#define FC2_3_FST    0x00000128U //N0+NFC+NCOM+(2*NFAN)+4 = 74
#define FC2_3_FCMD   0x0000012CU //N0+NFC+NCOM+(2*NFAN)+5 = 75
#define FC2_3_FSPD   0x00000130U //N0+NFC+NCOM+(2*NFAN)+6 = 76
#define FC2_3_FTIME  0x00000134U //N0+NFC+NCOM+(2*NFAN)+7 = 77
#define FC2_3_FPWM   0x00000138U //N0+NFC+NCOM+(2*NFAN)+8 = 78
#define FC2_3_FAPWM  0x0000013CU //N0+NFC+NCOM+(2*NFAN)+9 = 79

//#define FC2_4_PAGE   0x140     //N0+NFC+NCOM+(3*NFAN)+0 = 80
#define FC2_4_CFG12  0x00000144U //N0+NFC+NCOM+(3*NFAN)+1 = 81
#define FC2_4_CFGMFR 0x00000148U //N0+NFC+NCOM+(3*NFAN)+2 = 82
#define FC2_4_FRESP  0x0000014CU //N0+NFC+NCOM+(3*NFAN)+3 = 83
#define FC2_4_FST    0x00000150U //N0+NFC+NCOM+(3*NFAN)+4 = 84
#define FC2_4_FCMD   0x00000154U //N0+NFC+NCOM+(3*NFAN)+5 = 85
#define FC2_4_FSPD   0x00000158U //N0+NFC+NCOM+(3*NFAN)+6 = 86
#define FC2_4_FTIME  0x0000015CU //N0+NFC+NCOM+(3*NFAN)+7 = 87
#define FC2_4_FPWM   0x00000160U //N0+NFC+NCOM+(3*NFAN)+8 = 88
#define FC2_4_FAPWM  0x00000164U //N0+NFC+NCOM+(3*NFAN)+9 = 89

//N0+(FC*NFC)+NCOM+(FAN*NFAN)+X

#endif /* MSS_I2C_CONTROLLER_H_ */
